(()=>{"use strict";let e=document.getElementsByClassName("player-square"),t=document.getElementsByClassName("opponent-square"),r=document.getElementById("player-gameboard"),o=document.getElementById("opponent-gameboard");r.style.gridTemplateColumns="repeat(10,1fr)",r.style.gridTemplateRows="repeat(10,1fr)",o.style.gridTemplateColumns="repeat(10,1fr)",o.style.gridTemplateRows="repeat(10,1fr)",function(){for(let e=0;e<=9;e++)for(let t=0;t<=9;t++){let o=document.createElement("div");o.setAttribute("x",t),o.setAttribute("y",e),o.classList.add("player-square"),r.appendChild(o)}for(let e=0;e<=9;e++)for(let t=0;t<=9;t++){let r=document.createElement("div");r.setAttribute("x",t),r.setAttribute("y",e),r.classList.add("opponent-square"),o.appendChild(r)}}();let l=document.getElementById("start"),n=document.getElementById("endPage"),a=document.getElementById("result"),s=document.querySelector("h3");function i(e,t){return Math.floor(Math.random()*(t-e)+e)}l.disabled=!0,n.style.display="none";const d=e=>{let t={ships:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],placeShip:function(e,t,r){return r.x=e,r.y=t,{x:e,y:t}},getCoordinates:function(e){return{x:e.x,y:e.y}},populateBoards:function(e,t,r){for(let o=0;o<r.length;o++)r[o].getAttribute("x")==e&&r[o].getAttribute("y")==t&&(r[o].style.backgroundColor="black")}},r=[];return{name:e,gameboard:t,populate:function(){for(let e=0;e<t.ships.length;e++){let o=i(0,9),l=i(0,9);for(let e=1;e<r.length;e++)o==r[e].x&&l==r[e].y&&(o=i(0,9),l=i(0,9));r.push({x:o,y:l}),t.placeShip(o,l,t.ships[e])}}}};(()=>{let r=d("You"),o=d("Computer");o.populate();let g=[];function u(){let t=i(0,9),o=i(0,9);for(let e=1;e<g.length;e++)t==g[e].x&&o==g[e].y&&(t=i(0,9),o=i(0,9)),g.push({x:t,y:o});for(let l=0;l<e.length;l++)if(e[l].getAttribute("x")==t&&e[l].getAttribute("y")==o){for(let t=0;t<r.gameboard.ships.length;t++)if(e[l].getAttribute("x")==r.gameboard.getCoordinates(r.gameboard.ships[t]).x&&e[l].getAttribute("y")==r.gameboard.getCoordinates(r.gameboard.ships[t]).y)return e[l].style.backgroundColor="red",void m++;e[l].style.backgroundColor="blue"}}let c=0,m=0;function p(){for(let e=0;e<t.length;e++)t[e].addEventListener("click",b)}let y=[];function b(e){let t=e.target.getAttribute("x"),r=e.target.getAttribute("y");for(let e=1;e<y.length;e++)if(t==y[e].x&&r==y[e].y)return void console.log("Cannot hit the same field more than once");y.push({x:t,y:r}),e.target.removeEventListener("click",b);for(let t=0;t<o.gameboard.ships.length;t++){let r=e.target.getAttribute("x"),l=e.target.getAttribute("y");if(o.gameboard.getCoordinates(o.gameboard.ships[t]).x==r&&o.gameboard.getCoordinates(o.gameboard.ships[t]).y==l){e.target.style.backgroundColor="red",c++;break}e.target.style.backgroundColor="blue"}setTimeout(u,50),p(),5===c?(a.textContent="You win",n.style.display="block"):5===m&&(a.textContent="Computer wins",n.style.display="block")}let f=0;for(let t=0;t<e.length;t++)e[t].addEventListener("click",h);function h(t){t.target.removeEventListener("click",h);let o=t.target.getAttribute("x"),n=t.target.getAttribute("y");if(f<=4&&(r.gameboard.placeShip(o,n,r.gameboard.ships[f]),r.gameboard.populateBoards(o,n,e),f++),f>=5){l.disabled=!1;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",h)}}l.addEventListener("click",(()=>{!function(e){for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"}(e),p(),l.disabled=!0,s.textContent="Play!"}))})()})();